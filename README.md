# 🃏MemoryGame Plugin

### 📌 概要  
Minecraft(Spigot)向けの神経衰弱を模したミニゲームが遊べるプラグインです。  
プレイヤーがランダムに並んだブロックをクリックし、各ブロックの数字のペアを揃えてスコアを競います。

---
 
### 🎥 プレイ画面  
to be continued....

---

### 🪄 機能・特徴

| コマンド | 説明 |
|----------|------|
| `/memorygame play <1-20>` | 指定ペア数でゲーム開始 |
| `/memorygame rank` | スコアランキング表示 |

- 制限時間: 30秒 画面上部に残り時間を表すバーが表示されます

- ブロックの出現: プレイヤーからX方向に指定したペア数の分並んで出現します

- マルチプレイ対応: 同じワールド内の別プレイヤーがゲーム中でも遊べます

- スコアの永続化: スコアをDBに保存します(MyBatis + MySQL使用)

- 演出: 正解時や終了時に演出が発生します

---

### 💡 設計・意識した点

- 扱いやすさと仕様変更・拡張性を意識し、役割ごとにクラスを分けました。(command/service/repository等)

- 例外への対策　ブロック破壊、ゲーム中のログアウト、二重起動 各ケースに対して明示的な処理を実装しました。

- マルチプレイの対応　プレイヤーごとに`ExecutigPlayer`インスタンスを生成し、個別に管理しました。ブロックの配置リストなどもこれに持たせているためデータが競合せずにゲームが進行するようになっています。

- 一部設定の外部化　使いやすさを高めるためDB接続情報、制限時間やコマンド`/memorygame rank`による表示数、ブロックの間隔などはコードに埋め込まず、`config.yml`から読み込む仕様にしました。

---

### 💎 技術スタック
| 区分 | 使用技術 |
|------|----------|
| 言語 | Java 21 |
| API | Spigot API 1.21|
| DB | MySQL 8.0|
| ORM | MyBatis 3.5.19|
| ビルド | gradle |
| ゲーム | Minecraft 1.21 |
---
 
### 🛠️ 導入方法  
1. JARファイルを/pluginsフォルダへ配置

2. MySQLでplayer_score テーブルを作成

```sql
CREATE TABLE player_score (
  id INT AUTO_INCREMENT PRIMARY KEY,
  player_name VARCHAR(15) NOT NULL,
  score INT NOT NULL,
  registered_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

3. サーバーを起動

---

### ✒️ 制作目的  
Java学習の一環として、実際に動くものの開発を通して以下の力を身につけることを目的としました。

- 言語の理解の向上: 基本文法/イベント処理/オブジェクト指向への理解を深める

- 設計・責務分離の実践: 機能要件・非機能要件の設定、役割ごとのクラス分け

- DBの理解: OR Mapperの仕組みとSQL言語の理解、Mybatisを用いたコードとの連携
 
- 例外に対しての対応: 途中退出やブロック破壊などの例外ケースでも動作が破綻しないような仕組み作り

- 変更、拡張性の考慮: config.ymlによる外部設定化や仕様変更に対応しやすいコード構成を意識
